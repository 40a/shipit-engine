<li class="deploy" id="deploy-<%= deploy.id %>" data-task-status="<%= deploy.status %>">
  <div class="status <%= deploy.status %>" data-tooltip="<%= deploy.status.capitalize %>">
    <%= link_to stack_deploy_path(@stack, deploy) do %>
      <i><%= deploy.status %></i>
    <% end %>
  </div>
  <div class="event">
    <span class="event-meta">
      <%= render_github_user(deploy.author) %>
      <% if deploy.rollback? %>
        rolled back
      <% else %>
        deployed
      <% end %>

      <%= link_to_github_deploy(deploy) %> <%= timeago_tag(deploy.created_at, force: true) %>
      <span class="event-time">at <%= deploy.created_at %></span>
      <span class="event-stats">
        <span class="event-additions">+<%= deploy.additions %></span>
        <span class="event-deletions">-<%= deploy.deletions %></span>
      </span>
    </span>
    <span class="event-title">
      <a href="<%= stack_deploy_path(@stack, deploy) %>">
        <%= render_commit_message deploy.until_commit %>
      </a>
      <span class="event-number"></span>
    </span>
  </div>

  <% if deploy.rollbackable? %>
    <% if deploy.stack.deploying? %>
      <%= link_to 'Deploy in progress...', '#', class: 'btn disabled deploy-action' %>
    <% else  %>
      <%= link_to "Rollback to this deploy", rollback_stack_deploy_path(@stack, deploy), class: 'btn delete deploy-action rollback-action' %>
    <% end %>
  <% end %>
</li>
